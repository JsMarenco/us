---
// Third-party dependencies
import type { User } from "@prisma/client";

// Current project dependencies
import { defaultBanner, defaultAvatar } from "../../../constants";

interface Props {
  user: User;
}

const { user } = Astro.props;

const bannerSrc = defaultBanner(null, user.username);
const avatarSrc = defaultAvatar(user.avatarSrc, user.username);

const { username, firstName, lastName, bio } = user;
---

<section class="relative w-full overflow-hidden rounded-xl">
  <div class="relative h-48 w-full">
    <img
      alt="Banner"
      class="absolute inset-0 h-full w-full rounded-xl object-cover"
      src={bannerSrc}
    />
    <div
      class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/10 to-black/50 backdrop-blur-sm"
    >
    </div>
  </div>

  <div class="relative -mt-16 flex flex-col items-center px-6">
    <div class="relative">
      <img
        alt={username}
        class="h-32 w-32 rounded-full border-4 border-white shadow-lg"
        src={avatarSrc}
      />
      <div class="absolute inset-0 rounded-full ring-2 ring-white/30"></div>
    </div>

    <h1 class="mt-4 text-center text-3xl font-bold text-white">
      {
        firstName || lastName
          ? `${firstName ?? ""} ${lastName ?? ""}`.trim()
          : username
      }
    </h1>
    <p class="mt-1 text-sm text-gray-200">@{username}</p>
    {bio && <p class="mt-3 max-w-xl text-center text-gray-100">{bio}</p>}
  </div>
</section>
